<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spirale de Mots</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: radial-gradient(circle, #1a2a6c, #b21f1f, #fdbb2d);
        }
        #overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 10;
            color: white;
            font-family: Arial, sans-serif;
        }
        textarea, button {
            display: block;
            margin: 10px 0;
            padding: 10px;
            border: none;
            border-radius: 5px;
        }
        textarea {
            width: 300px;
            height: 80px;
        }
        button {
            background-color: #28a745;
            color: white;
            cursor: pointer;
        }
    </style>
</head>
<body>
<div id="overlay">
    <textarea id="textInput" placeholder="Entrez votre texte ici"></textarea>
    <button onclick="createSpiral()">Créer Spirale</button>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
    let scene, camera, renderer, group;

    // Initialisation de la scène
    function init() {
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 40;

        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Ajouter une lumière
        const light = new THREE.PointLight(0xffffff, 1, 500);
        light.position.set(10, 10, 25);
        scene.add(light);

        group = new THREE.Group();
        scene.add(group);

        animate();
    }

    // Fonction pour créer une spirale à partir du texte
    function createSpiral() {
        const inputText = document.getElementById("textInput").value.trim();
        if (!inputText) {
            alert("Veuillez entrer du texte.");
            return;
        }

        const words = inputText.split(/\s+/);
        const spiralRadius = 10; // Rayon de la spirale
        const wordHeight = 1.5; // Distance verticale entre les mots
        const totalTurns = 3; // Nombre de tours de la spirale

        // Nettoyer la scène avant d'ajouter de nouveaux mots
        while (group.children.length > 0) {
            group.remove(group.children[0]);
        }

        // Ajouter les mots sur une spirale
        words.forEach((word, index) => {
            const angle = (index / words.length) * Math.PI * 2 * totalTurns; // Calcul de l'angle
            const x = spiralRadius * Math.cos(angle);
            const z = spiralRadius * Math.sin(angle);
            const y = index * wordHeight - (words.length / 2) * wordHeight;

            const wordMesh = createWord(word);
            wordMesh.position.set(x, y, z);
            wordMesh.rotation.y = -angle; // Orientation des mots
            group.add(wordMesh);
        });
    }

    // Fonction pour créer un mot en 3D
    function createWord(word) {
        const geometry = new THREE.TextGeometry(word, {
            font: new THREE.FontLoader().parse({
                family: "Roboto",
                weight: "bold"
            }),
            size: 1,
            height: 0.3,
        });

        const material = new THREE.MeshStandardMaterial({ color: 0xff5733 });
        const wordMesh = new THREE.Mesh(geometry, material);
        return wordMesh;
    }

    // Animation de la scène
    function animate() {
        requestAnimationFrame(animate);
        group.rotation.y += 0.01; // Rotation autour de l'axe Y
        renderer.render(scene, camera);
    }

    // Initialisation
    init();

    // Mise à jour de la taille de la fenêtre
    window.addEventListener("resize", () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });
</script>
</body>
</html>
